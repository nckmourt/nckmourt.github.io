---
import BaseLayout from "../layouts/BaseLayout.astro";
import Header from "../components/Header.astro";
import Footer from "../components/Footer.astro";
import Hero from "../components/Hero.astro";
import ProjectCard from "../components/ProjectCard.astro";
import SocialLinks from "../components/SocialLinks.astro";
import { getCollection } from "astro:content";

const projects = await getCollection("projects");
const featured = projects.filter(p => p.data.featured).slice(0, 6);
---
<BaseLayout title="Nick Mourtoupalas | Graphics and data visualization" description="Professional portfolio of graphics journalism and data visualization.">
  <Fragment slot="header"><Header /></Fragment>
  
  <Hero />

  <section class="section">
    <div class="container">
      <div class="featured-intro">
        <h2 class="featured-title">Featured Work</h2>
        <p class="featured-statement">
          A selection of recent graphics and data journalism projects, from fast-turn vote trackers to deeply reported explainers.
        </p>
      </div>
      
      <div class="project-grid">
        {featured.map((p) => (
          <ProjectCard project={p} />
        ))}
      </div>
    </div>
  </section>

  <section id="about-contact" class="about-section">
    <div class="container about-wrap">
      <h2 class="about-title">About & Contact</h2>
      <div class="about-grid">
        <div class="about-copy">
          <p>
            Nick Mourtoupalas is a visual journalist and data reporter based in Washington, D.C.
          </p>
          <p>
            He spent more than eight years at The Washington Post, rising from copy aide to graphics reporter.
            His work spans Congress, federal spending, elections, redistricting, courts, immigration and
            economic policy, building interactive vote trackers, confirmation databases, maps and explainers
            used by millions of readers.
          </p>
          <p>
            Nick combines reporting judgment with data analysis, cartography and front-end development to make
            complex systems clear. He works from raw datasets to finished graphics, often under breaking news
            deadlines, and builds reusable tools that strengthen newsroom coverage over time.
          </p>
          <SocialLinks className="about-social" iconSet="navWhite" />
        </div>
        <div class="about-photo-frame">
          <img
            class="about-photo"
            src="/images/headshot.jpg"
            alt="Nick Mourtoupalas headshot"
            loading="lazy"
          />
        </div>
      </div>
    </div>
  </section>

  <Fragment slot="footer"><Footer /></Fragment>
</BaseLayout>

<style>
  :global(body) {
    background: #111111;
    color: #f3f6fb;
  }

  .section {
    padding: 0 0 80px;
    background: #111111;
    color: #f3f6fb;
    --accent: #f4f7fc;
    --text: #e8edf6;
    --muted: #a8b3c6;
    --link: #f4f7fc;
  }

  .featured-intro {
    margin: 0;
    padding-top: clamp(24px, 5vw, 52px);
    padding-bottom: clamp(24px, 4vw, 40px);
  }

  .featured-title {
    margin: 0 auto 12px;
    width: min(100%, 980px);
    font-family: "Bebas Neue", sans-serif;
    font-weight: 400;
    font-size: clamp(2.2rem, 5vw, 3.6rem);
    letter-spacing: 0.05em;
    text-transform: uppercase;
    color: #ffffff;
    line-height: 0.95;
  }

  .featured-statement {
    margin: 0 auto;
    width: min(100%, 980px);
    max-width: none;
    text-align: left;
    font-family: "Inter", sans-serif;
    font-size: 16px;
    line-height: 1.65;
    color: rgba(232, 237, 244, 0.92);
  }

  .project-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
    gap: 40px;
  }

  .about-section {
    position: relative;
    background: #111111;
    padding: 54px 0 70px;
    color: #f3f6fb;
  }

  .about-section::before {
    content: "";
    position: absolute;
    left: 50%;
    top: 0;
    transform: translateX(-50%);
    width: var(--divider-width);
    border-top: 1px solid #232b3a;
    pointer-events: none;
  }

  .about-wrap {
    max-width: 1200px;
  }

  .about-title {
    text-align: left;
    font-family: 'Bebas Neue', sans-serif;
    font-size: clamp(1.9rem, 4.2vw, 3rem);
    font-weight: 400;
    letter-spacing: 0.04em;
    text-transform: uppercase;
    width: min(784px, 100%);
    margin: 0 auto 38px;
    color: #f4f7fc;
    font-style: normal;
  }

  .about-grid {
    display: grid;
    grid-template-columns: minmax(320px, 540px) minmax(180px, 240px);
    align-items: start;
    gap: 4px;
    justify-content: center;
  }

  .about-copy {
    font-family: 'Inter', sans-serif;
    color: #f3f6fb;
    font-size: 16px;
    line-height: 1.6;
    max-width: 540px;
    justify-self: start;
  }

  .about-copy p {
    margin: 0 0 26px;
    max-width: 90%;
  }

  :global(.about-social) {
    --social-size: 26px;
    --social-bg: #1c2431;
    --social-border: #3a4558;
    --social-color: #ffffff;
    --social-hover-bg: #253246;
    --social-hover-border: #4f617f;
    --social-hover-color: #ffffff;
  }

  .about-photo-frame {
    width: 100%;
    max-width: 240px;
    justify-self: start;
    align-self: start;
    border: 6px solid #2d3748;
    background: #111722;
    padding: 0;
  }

  .about-photo {
    display: block;
    width: 100%;
    height: auto;
    aspect-ratio: 1 / 1;
    object-fit: cover;
  }

  :global(.section .project-card .meta) {
    color: #aeb8cb;
  }

  :global(.section .project-card .title) {
    color: #ffffff;
  }

  :global(.section .project-card .description) {
    color: #e1e7f2;
    opacity: 1;
  }

  :global(.section .project-card .thumb-container) {
    background: #0d131d;
    border-color: #2a3446;
  }

  :global(.site-footer) {
    background: #111111;
  }

  :global(.site-footer .footer-text) {
    color: #ffffff;
  }

  @media (max-width: 600px) {
    .project-grid {
      grid-template-columns: 1fr;
    }
  }

  @media (max-width: 900px) {
    .about-grid {
      grid-template-columns: 1fr;
      gap: 28px;
    }

    .about-copy p {
      max-width: none;
    }

    .about-photo-frame {
      width: 200px;
      height: 200px;
      max-width: 200px;
      justify-self: center;
    }
  }
</style>
