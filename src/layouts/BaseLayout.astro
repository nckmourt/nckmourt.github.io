---
const {
  title = "Nick Mourtoupalas",
  description = "Graphics and data visualization portfolio.",
} = Astro.props;
---
<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="description" content={description} />
    <title>{title}</title>
    <link id="site-favicon" rel="icon" href="/favicon-dark.png?v=5" type="image/png" />
    <link id="site-touch-icon" rel="apple-touch-icon" href="/favicon-dark.png?v=5" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Inter:wght@400;500;600&family=Literata:opsz,wght@7..72,600;7..72,700&family=Merriweather:ital,wght@0,300;0,400;0,700;0,900;1,300;1,400&display=swap" rel="stylesheet">
    <style is:global>
      :root{
        --bg:#111111;
        --text:#f3f6fb;
        --muted:#666666;
        --accent:#ffffff;
        --theme-accent:#56b0ff;
        --theme-accent-rgb:86,176,255;
        --theme-accent-soft:rgba(var(--theme-accent-rgb), 0.16);
        --link:var(--theme-accent);
        --hero-blue: #0F1C3F;
        --max:1080px;
        --page-gutter: clamp(18px, 4vw, 56px);
        --nav-height: 64px;
        --divider-width: min(760px, calc(100% - (var(--page-gutter) * 2)));

        /* Header specific variables */
        --header-bg: #171b21;
        --header-text: #ffffff;
        --header-border: #2d323a;
      }
      
      *{box-sizing:border-box}
      html,body{height:100%}
      html, body { overflow-x: hidden; }
      body{
        margin:0;
        font-family: 'Inter', system-ui, sans-serif;
        background: var(--bg);
        color:var(--text);
        line-height:1.6;
      }
      
      h1, h2, h3, h4, h5, h6 {
        font-family: 'Merriweather', serif;
        font-weight: 700;
        color: var(--accent);
        margin-top: 0;
      }

      a{color:var(--link); text-decoration:none; transition: color 0.2s ease;}
      a:hover{color:var(--theme-accent); text-decoration:underline}
      ::selection {
        background: rgba(var(--theme-accent-rgb), 0.35);
        color: #ffffff;
      }
      
      .wrap{
        /* max-width is removed here to allow full-width sections. 
           Inner containers will use --max */
        width: 100%; 
        min-height: 100vh;
        display: flex;
        flex-direction: column;
      }

      main {
        flex: 1;
      }

      /* Utility classes */
      .container {
        max-width: var(--max);
        margin: 0 auto;
        padding: 0 var(--page-gutter);
      }

      .btn{
        display:inline-flex; align-items:center; gap:8px;
        padding:8px 16px;
        border-radius:4px;
        border:1px solid rgba(var(--theme-accent-rgb),0.45);
        background: rgba(var(--theme-accent-rgb), 0.08);
        color:var(--text);
        text-decoration:none;
        font-family: 'Inter', sans-serif;
        font-size: 14px;
        font-weight: 500;
      }
      .btn:hover{
        background: rgba(var(--theme-accent-rgb), 0.16);
        border-color: rgba(var(--theme-accent-rgb), 0.75);
        text-decoration:none;
      }
      
    </style>
  </head>
  <body>
    <div class="wrap">
      <slot name="header" />
      <main>
        <slot />
      </main>
      <slot name="footer" />
    </div>
    <script>
      const faviconQuery = window.matchMedia("(prefers-color-scheme: dark)");
      const faviconEl = document.getElementById("site-favicon");
      const touchIconEl = document.getElementById("site-touch-icon");
      const faviconVersion = "v=5";

      const applyThemeFavicon = () => {
        const href = faviconQuery.matches
          ? `/favicon-dark.png?${faviconVersion}`
          : `/favicon-light.png?${faviconVersion}`;
        if (faviconEl) faviconEl.setAttribute("href", href);
        if (touchIconEl) touchIconEl.setAttribute("href", href);
      };

      applyThemeFavicon();
      if (typeof faviconQuery.addEventListener === "function") {
        faviconQuery.addEventListener("change", applyThemeFavicon);
      } else if (typeof faviconQuery.addListener === "function") {
        faviconQuery.addListener(applyThemeFavicon);
      }

      const bodyEl = document.body;
      const htmlEl = document.documentElement;
      const headerEl = document.querySelector(".site-header");
      const brandNameEl = document.querySelector(".site-header .brand-name");
      const heroEl = document.querySelector(".hero-home");
      const heroImages = () => document.querySelectorAll(".hero-home .carousel-slide img");
      let scrollTicking = false;
      const scrollThreshold = 50;

      const updateScrolledState = () => {
        const isScrolled = window.scrollY > scrollThreshold;
        bodyEl.classList.toggle("has-scrolled", isScrolled);
        htmlEl.classList.toggle("has-scrolled", isScrolled);
        headerEl?.classList.toggle("is-compact", isScrolled);
        heroEl?.classList.toggle("is-scrolled", isScrolled);

        if (headerEl) headerEl.style.height = isScrolled ? "44px" : "";
        if (brandNameEl) brandNameEl.style.fontSize = isScrolled ? "18px" : "";
        heroImages().forEach((img) => {
          img.style.transform = isScrolled ? "scale(1.1)" : "scale(1)";
        });

        scrollTicking = false;
      };

      const onScroll = () => {
        if (scrollTicking) return;
        scrollTicking = true;
        window.requestAnimationFrame(updateScrolledState);
      };

      updateScrolledState();
      window.addEventListener("scroll", onScroll, { passive: true });
    </script>
  </body>
</html>
